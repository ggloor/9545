---
title: "9545 2018 Day 1"
output: html_document
---

# General Info

- This couse will run MW 9:30 - 11:30 AM for 6 sessions beginning Sept 10.

- This course will cover how to use R and markdown to reproducibly analyze data with the emphasis on how to use R for data manipulation and exploration

- There will be an oral evaluation plus notebook examination worth 30%.

- Notebooks must be kept in R markdown and be able to be knit into a html document

- There will be one final takehome assignment worth 70%

## Resources

- All students need to master these [tutorials up to tutorial 4](http://www.ee.surrey.ac.uk/Teaching/Unix/) through self-directed learning.

- There is a good [R markdown cheatsheet](https://github.com/adam-p/markdown-here/wiki/Markdown-Cheatsheet)

- I recommend that students obtain a copy of `R in action` by Robert Kabacoff. In particular, I hope the students in the class become proficient with the concepts and methods in the first 6 chapters. This is one of those books that is worth buying.

- [CRAN also has a decent introduction](https://cran.r-project.org/doc/contrib/Paradis-rdebuts_en.pdf)

- All students will need an up-to-date install of [RStudio](https://www.rstudio.com/), or command line R (if desired) plus a plain text editor

# Basics of R markdown

This is an R markdown document, and the plain text code can be found at:
# Basics of R

R is a programming language by statisticians for statisticians. It is idiosyncratic, but is worth learning despite (not because of) this as it is an extremely useful tool or data analysis. While other statistical analysis programs allow you to do what they have available, R allows you to do what you can imagine.

There are two basic data structures in R, the vector and the list.

```{r, echo=T}

# this is a comment, you should use them because your future self is not that bright

# the first base data type is a vector object  and we can make vectors with the c() function
# vectors can contain only one kind of data (number, character, logical)
# the assignment operator is "<-"

x <- c(1,2,3)
y <- c(4,5,6)
z <- c(7,8)

# a two dimensional vector is a matrix
xy <- cbind(x,y)

# the second base data type is a list
# lists can contain anything

xyz <- list(x,y,z,xy)

# a dataframe is a special type of list whereby the vectors must be of the same length

ab <- data.frame(x,y)

```

- what is inside `x`?

- what is inside the other objects?


The unit of computation in R is the function, and you can recognize functions by their round brackets ().
Information about functions can be found using the ?function.name notation, and you can get an example by example("function.name").

The second type of bracket is the curly bracket{} that is used to keep commands together in functions or logical tests.

## Examining and subsetting datasets

There are a few commands that make understanding your data object tolerable.

- `str(obj)` structure of the object

- `class(obj)` class of the object

- `mode(obj)` the mode of the object

-  `names(obj)` the names (or `rownames` or `colnames`) of the object

and many others, but these are the main workhorses. Try them out on the data types made above.

## A minimal R Markdown example

```{r}
# this is a comment
# everything in R is a vector (or series of values)
# commands or functions use round brackets

x <- c(1,2,4,8)
y <- c(1,2,4,16)

# convert x,y to proportion
x.p <- round(x/sum(x),3)
y.p <- round(y/sum(y),3)


# convert number to ratio using element 3
x.r.3 <- x/x[3]
y.r.3 <- y/y[3]

x.p.3 <- x.p/x.p[3]
y.p.3 <- y.p/y.p[3]

```


```r
# runif() random uniform function to generate pseudo random numbers
# c() concatenation function to make an atomic vector

x <- c(runif(10, 0,10))

y <- c(runif(10,2,10))

z <- c(runif(10,0,5))

mean(x)
```

```
## [1] 3.91789
```

```r
z <- summary(x)
print(z)
```


the mean of vector x is: `r mean(x)`
```
##    Min. 1st Qu.  Median    Mean 3rd Qu.    Max.
## 0.00559 0.84540 4.80500 3.91800 5.69300 8.48200
```

we can determine the mean of vector x, or summarize vector x


Those are the simple basics, and equivalent to a 'hello world' in other languages. Now you need to know what the basic functions that you can use. If it is not a dataset, everything in R is a function. You can make your own function if you like, but there are many pre-built functions for manipulating and displaying data.

Now we will check out the basic vocabulary page from Hadley Wickham's advanced R book: http://adv-r.had.co.nz/Vocabulary.html


### lists, matrices, dataframes

Now we can convert xyz into a matrix using cbind. What does the rbind() function do?


```r
xyz.m <- cbind(x,y,z)
xyz.d <- data.frame(x,y,z, stringsAsFactors=F)
xyz.l <- list(x,y,z)
names(xyz.l) <- c("x","y","z")
dim(xyz.m)
```

```
## [1] 10  3
```

We will explore this with
`str`
`dim`
`typeof`

and work on subsetting the data

# please familiarize yourselves with the above
## we will start here on wed

### functions

Everything that is not data in R is a function. Functions are defined as:

`function.name <- function (parameters) {code}`

So for example, the rdirichlet function that we will use in a moment looks like this:


```r
rdirichlet <- function (n, alpha)
{
  if(length(n) > 1) n <- length(n)
  #if(length(n) == 0 || as.integer(n) == 0) return(numeric(0))
  #n <- as.integer(n)
  if(n < 0) stop("value(n) can not be negative in rtriang")

  if(is.vector(alpha)) alpha <- t(alpha)
  l <- dim(alpha)[2]
  x <- matrix(rgamma(l * n, t(alpha)), ncol = l, byrow=TRUE)  # Gere le recycling
  return(x / rowSums(x))
}
```
```{r}
data(anscombe)
plot(anscombe$x1~anscombe$x2)
abline(lm(anscombe$x1~anscombe$x2))
```
